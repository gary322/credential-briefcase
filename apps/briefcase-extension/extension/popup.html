<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Credential Briefcase</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <main>
      <header class="top">
        <div class="brand">
          <h1>Credential Briefcase</h1>
          <div id="status" class="status"></div>
        </div>

        <nav class="tabs" aria-label="Briefcase tabs">
          <button class="tab active" data-tab="mcp" type="button">MCP</button>
          <button class="tab" data-tab="providers" type="button">Providers</button>
          <button class="tab" data-tab="approvals" type="button">Approvals</button>
          <button class="tab" data-tab="alerts" type="button">Alerts</button>
          <button class="tab" data-tab="enterprise" type="button">Enterprise</button>
          <button class="tab" data-tab="receipts" type="button">Receipts</button>
          <button class="tab" data-tab="budgets" type="button">Budgets</button>
          <button class="tab" data-tab="policy" type="button">Policy</button>
        </nav>
      </header>

      <section id="tab-mcp" class="tabpane">
        <section class="card">
          <h2>Add Remote MCP Server</h2>
          <form id="add-server-form">
            <label>
              Server ID
              <input id="server-id" name="server_id" type="text" required maxlength="64" />
            </label>
            <label>
              Endpoint URL
              <input
                id="endpoint-url"
                name="endpoint_url"
                type="url"
                required
                placeholder="https://example.com/mcp"
              />
            </label>
            <button type="submit">Add Server</button>
          </form>
        </section>

        <section class="card">
          <div class="card-head">
            <h2>Servers</h2>
            <button id="refresh-servers" class="small" type="button">Refresh</button>
          </div>
          <div id="servers" class="list"></div>
        </section>
      </section>

      <section id="tab-providers" class="tabpane hidden">
        <section class="card">
          <h2>Add Provider</h2>
          <form id="add-provider-form">
            <label>
              Provider ID
              <input id="provider-id" name="provider_id" type="text" required maxlength="64" />
            </label>
            <label>
              Base URL
              <input
                id="provider-base-url"
                name="base_url"
                type="url"
                required
                placeholder="http://127.0.0.1:9099"
              />
            </label>
            <button type="submit">Add Provider</button>
          </form>
        </section>

        <section class="card">
          <div class="card-head">
            <h2>Providers</h2>
            <button id="refresh-providers" class="small" type="button">Refresh</button>
          </div>
          <div id="providers" class="list"></div>
        </section>
      </section>

      <section id="tab-approvals" class="tabpane hidden">
        <section class="card">
          <div class="card-head">
            <h2>Pending Approvals</h2>
            <button id="refresh-approvals" class="small" type="button">Refresh</button>
          </div>
          <div id="approvals" class="list"></div>
        </section>
      </section>

      <section id="tab-alerts" class="tabpane hidden">
        <section class="card">
          <div class="card-head">
            <h2>Alerts</h2>
            <button id="refresh-alerts" class="small" type="button">Refresh</button>
          </div>
          <div id="alerts" class="list"></div>
        </section>
      </section>

      <section id="tab-enterprise" class="tabpane hidden">
        <section class="card">
          <h2>Enroll Device</h2>
          <p class="hint">
            Connect this briefcase to an enterprise control plane. Policy bundles are verified and
            enforced locally; the agent never receives raw secrets.
          </p>
          <form id="cp-enroll-form">
            <label>
              Control Plane Base URL
              <input
                id="cp-base-url"
                name="base_url"
                type="url"
                required
                placeholder="https://control-plane.example.com"
              />
            </label>
            <label>
              Admin Token
              <input
                id="cp-admin-token"
                name="admin_token"
                type="password"
                required
                placeholder="Bearer token"
              />
            </label>
            <label>
              Device Name
              <input
                id="cp-device-name"
                name="device_name"
                type="text"
                required
                maxlength="128"
                placeholder="laptop-1"
              />
            </label>
            <button type="submit">Enroll</button>
          </form>
        </section>

        <section class="card">
          <div class="card-head">
            <h2>Status</h2>
            <div class="right">
              <button id="cp-sync" class="small" type="button">Sync now</button>
              <button id="cp-refresh" class="small" type="button">Refresh</button>
            </div>
          </div>
          <div id="cp-status" class="list"></div>
        </section>
      </section>

      <section id="tab-receipts" class="tabpane hidden">
        <section class="card">
          <div class="card-head">
            <h2>Receipts</h2>
            <div class="right">
              <button id="verify-receipts" class="small" type="button">Verify</button>
              <button id="export-receipts" class="small" type="button">Export</button>
              <button id="refresh-receipts" class="small" type="button">Refresh</button>
            </div>
          </div>
          <div id="receipts" class="list"></div>
        </section>
      </section>

      <section id="tab-budgets" class="tabpane hidden">
        <section class="card">
          <h2>Set Daily Budget (micro-USD)</h2>
          <form id="set-budget-form">
            <label>
              Category
              <input id="budget-category" name="category" type="text" required maxlength="64" />
            </label>
            <label>
              Daily Limit (micro-USD)
              <input
                id="budget-limit"
                name="daily_limit_microusd"
                type="number"
                required
                min="0"
                step="1"
              />
            </label>
            <button type="submit">Set Budget</button>
          </form>
        </section>

        <section class="card">
          <div class="card-head">
            <h2>Budgets</h2>
            <button id="refresh-budgets" class="small" type="button">Refresh</button>
          </div>
          <div id="budgets" class="list"></div>
        </section>
      </section>

      <section id="tab-policy" class="tabpane hidden">
        <section class="card">
          <h2>Policy Compiler</h2>
          <p class="hint">
            Try: <code>strict</code>, <code>relaxed</code>, <code>default</code>, or
            <code>cedar:&lt;cedar policy text&gt;</code>.
          </p>
          <form id="policy-compile-form">
            <label>
              Prompt
              <textarea
                id="policy-prompt"
                name="prompt"
                rows="4"
                required
                maxlength="4000"
                placeholder="strict"
              ></textarea>
            </label>
            <button type="submit">Compile</button>
          </form>
        </section>

        <section class="card">
          <div class="card-head">
            <h2>Proposal</h2>
            <button id="policy-refresh" class="small" type="button">Refresh</button>
          </div>
          <div id="policy-proposal" class="list"></div>
        </section>
      </section>
    </main>

    <script type="module" src="dist/popup.js"></script>
  </body>
</html>
