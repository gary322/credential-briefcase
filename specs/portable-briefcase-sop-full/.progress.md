# Progress

## Current

- **Phase**: implement
- **Task**: Phase 4.2 PKCS#11 backend (SoftHSM) + Phase 2.2 DPoP follow-up
- **Status**: in_progress

## Original goal

Implement full sop.txt briefcase (extension, mobile signer, hardware keys, remote MCP routing, real x402/L402, revocation, AI policy compiler, enterprise control plane)

## Completed

- Research + constraints + gaps captured (`research.md`)
- Full requirements and acceptance criteria captured (`requirements.md`)
- Target architecture and contracts captured (`design.md`)
- End-to-end work breakdown captured (`tasks.md`)
- Phase 0: `justfile` + Node workspace + OpenAPI + generated TS types + CI updated
- Phase 1: spec-compliant MCP surface + streamable HTTP transport + remote MCP routing (registry + proxying) + e2e tests
- Phase 2.1: OAuth PRM discovery (RFC 9728) + daemon-managed OAuth sessions for remote MCP
- Phase 3: WASM-first sandbox runtime + per-tool manifests + deny-by-default egress/filesystem enforcement + connector execution via sandbox host calls
- Phase 4.1: `crates/briefcase-keys` signer abstraction (software Ed25519 + P-256) integrated into daemon PoP signing

## Learnings

- This is a multi-platform effort; treat each major area as its own sub-spec/epic with its own CI gates.
- Keep enforcement centralized in `briefcased`; all new surfaces must remain non-secret-bearing.

## Blockers

- None (planning phase complete). Implementation is large and should be sequenced by Phases 0-12 in `tasks.md`.

## Next steps

1. Phase 2.2: add DPoP (RFC 8707) using `briefcase-keys` signer.
2. Phase 4.2: PKCS#11 signer backend with SoftHSM CI.
3. Phase 4.3: TPM2 signer backend with swtpm CI.
